<!-- KPIs Financiers -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <!-- CA Semaine -->
  <%= render CardComponent.new do %>
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <div class="w-8 h-8 bg-green-600 rounded-md flex items-center justify-center">
          <span class="text-white text-sm font-medium">‚Ç¨</span>
        </div>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-500">CA Semaine</p>
        <p class="text-2xl font-semibold text-gray-900">
          <%= number_to_currency(@revenues[:week], unit: "", separator: ",", delimiter: "") %>‚Ç¨
        </p>
        <p class="text-xs text-gray-500">Achats de cr√©dits</p>
      </div>
    </div>
  <% end %>

  <!-- CA Mois -->
  <%= render CardComponent.new do %>
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <div class="w-8 h-8 bg-blue-600 rounded-md flex items-center justify-center">
          <span class="text-white text-sm font-medium">üìÖ</span>
        </div>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-500">CA Mois</p>
        <p class="text-2xl font-semibold text-gray-900">
          <%= number_to_currency(@revenues[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
        </p>
        <p class="text-xs text-gray-500">Achats de cr√©dits</p>
      </div>
    </div>
  <% end %>

  <!-- Salaires Coachs Mois -->
  <%= render CardComponent.new do %>
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <div class="w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center">
          <span class="text-white text-sm font-medium">üë•</span>
        </div>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-500">Salaires Coachs (Mois)</p>
        <p class="text-2xl font-semibold text-gray-900">
          <%= number_to_currency(@coach_salaries[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
        </p>
        <p class="text-xs text-gray-500">Charges</p>
      </div>
    </div>
  <% end %>

  <!-- B√©n√©fice Mois -->
  <%= render CardComponent.new do %>
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <div class="w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center">
          <span class="text-white text-sm font-medium">üìä</span>
        </div>
      </div>
      <div class="ml-4">
        <p class="text-sm font-medium text-gray-500">B√©n√©fice (Mois)</p>
        <p class="text-2xl font-semibold <%= (@revenues[:month] - @coach_salaries[:month]) >= 0 ? 'text-green-600' : 'text-red-600' %>">
          <%= number_to_currency(@revenues[:month] - @coach_salaries[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
        </p>
        <p class="text-xs text-gray-500">CA - Salaires</p>
      </div>
    </div>
  <% end %>
</div>

<!-- Tableaux de Diff√©rences CA - Salaires -->
<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
  <!-- Diff√©rence Semaine -->
  <%= render CardComponent.new(padding: :none) do %>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900 flex items-center">
        <span class="mr-2">üìà</span>
        Diff√©rence Semaine
      </h3>
    </div>
    <div class="p-6">
      <div class="space-y-4">
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">CA Semaine</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@revenues[:week], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">Salaires Coachs</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@coach_salaries[:week], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <hr class="border-gray-200">
        <div class="flex justify-between items-center">
          <span class="text-sm font-bold text-gray-900">Diff√©rence</span>
          <span class="text-lg font-bold <%= (@revenues[:week] - @coach_salaries[:week]) >= 0 ? 'text-green-600' : 'text-red-600' %>">
            <%= number_to_currency(@revenues[:week] - @coach_salaries[:week], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Diff√©rence Mois -->
  <%= render CardComponent.new(padding: :none) do %>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900 flex items-center">
        <span class="mr-2">üìä</span>
        Diff√©rence Mois
      </h3>
    </div>
    <div class="p-6">
      <div class="space-y-4">
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">CA Mois</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@revenues[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">Salaires Coachs</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@coach_salaries[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <hr class="border-gray-200">
        <div class="flex justify-between items-center">
          <span class="text-sm font-bold text-gray-900">Diff√©rence</span>
          <span class="text-lg font-bold <%= (@revenues[:month] - @coach_salaries[:month]) >= 0 ? 'text-green-600' : 'text-red-600' %>">
            <%= number_to_currency(@revenues[:month] - @coach_salaries[:month], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
      </div>
    </div>
  <% end %>

  <!-- Diff√©rence Ann√©e -->
  <%= render CardComponent.new(padding: :none) do %>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900 flex items-center">
        <span class="mr-2">üìà</span>
        Diff√©rence Ann√©e
      </h3>
    </div>
    <div class="p-6">
      <div class="space-y-4">
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">CA Ann√©e</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@revenues[:year], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <div class="flex justify-between items-center">
          <span class="text-sm font-medium text-gray-500">Salaires Coachs</span>
          <span class="text-sm font-semibold text-gray-900">
            <%= number_to_currency(@coach_salaries[:year], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
        <hr class="border-gray-200">
        <div class="flex justify-between items-center">
          <span class="text-sm font-bold text-gray-900">Diff√©rence</span>
          <span class="text-lg font-bold <%= (@revenues[:year] - @coach_salaries[:year]) >= 0 ? 'text-green-600' : 'text-red-600' %>">
            <%= number_to_currency(@revenues[:year] - @coach_salaries[:year], unit: "", separator: ",", delimiter: "") %>‚Ç¨
          </span>
        </div>
      </div>
    </div>
  <% end %>
</div>

<!-- D√©tail des Revenus par Type -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
  <!-- Revenus par Type de Session (Information visuelle) -->
  <%= render CardComponent.new(padding: :none) do %>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900 flex items-center">
        <span class="mr-2">üèê</span>
        Revenus par Type de Session (Mois)
        <span class="ml-2 text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full">Info</span>
      </h3>
    </div>
    <div class="p-6">
      <% if @breakdowns[:sessions].any? %>
        <div class="space-y-3">
          <% @breakdowns[:sessions].each do |session_type, amount| %>
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
              <span class="text-sm font-medium text-gray-700">
                <%= case session_type
                    when 'entrainement' then 'Entra√Ænements'
                    when 'jeu_libre' then 'Jeux libres'
                    when 'coaching_prive' then 'Coachings priv√©s'
                    else session_type.humanize
                    end %>
              </span>
              <span class="text-sm font-semibold text-gray-900">
                <%= number_to_currency(amount, unit: "", separator: ",", delimiter: "") %>‚Ç¨
              </span>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-gray-500 text-center py-4">Aucun revenu de session ce mois</p>
      <% end %>
    </div>
  <% end %>

  <!-- CA par Type d'Achat -->
  <%= render CardComponent.new(padding: :none) do %>
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900 flex items-center">
        <span class="mr-2">üì¶</span>
        CA par Type d'Achat (Mois)
      </h3>
    </div>
    <div class="p-6">
      <% if @breakdowns[:packs].any? %>
        <div class="space-y-3">
          <% @breakdowns[:packs].each do |pack_type, amount| %>
            <div class="flex justify-between items-center p-3 bg-gray-50 rounded-lg">
              <span class="text-sm font-medium text-gray-700">
                <%= case pack_type
                    when 'credits' then 'Packs de Cr√©dits'
                    when 'stage' then 'Packs de Stage'
                    when 'license' then 'Packs de Licence'
                    else pack_type.humanize
                    end %>
              </span>
              <span class="text-sm font-semibold text-gray-900">
                <%= number_to_currency(amount, unit: "", separator: ",", delimiter: "") %>‚Ç¨
              </span>
            </div>
          <% end %>
        </div>
      <% else %>
        <p class="text-gray-500 text-center py-4">Aucun CA ce mois</p>
      <% end %>
    </div>
  <% end %>
</div>
